if(window.FileReader&&window.Promise&&"formNoValidate"in document.createElement("input")){Element.prototype.isv=function(){return this.offsetWidth>0&&this.offsetHeight>0},Element.prototype.serialize=function(){var a={};return[].forEach.call(this.getElementsByTagName("input"),function(b){b.name&&b.value&&(a[b.name]=b.value)}),a},Object.prototype.l=function(a){return[].forEach.call(this,function(b){b.value=b.getAttribute(a?"k":"j")}),this},Object.prototype.fade=function(a,b){var c=[];return"function"!=typeof a||b||(b=a,a=void 0),[].forEach.call(this,function(b){var d="undefined"==typeof a?!b.isv():a,e=b.style.opacity;c.push(new Promise(function(a){d&&(b.style.display="block",e=0);var c=setInterval(function(){d?e>=(d||1)?(clearInterval(c),a(b)):b.style.opacity=(e+=.1).toFixed(1):0>=e?(clearInterval(c),b.style.display="none",a(b)):b.style.opacity=(e-=.1).toFixed(1)},10)}))}),Promise.all(c).then(b),this};var gp=function(){gapi.signin.render("f",{clientid:"216469168993-dqhiqllodmfovgtrmjdf2ps5kj0h1gg9.apps.googleusercontent.com",cookiepolicy:"none",scope:"https://www.googleapis.com/auth/plus.me https://www.googleapis.com/auth/userinfo.email https://www.googleapis.com/auth/books",width:"wide",redirecturi:"postmessage",accesstype:"offline",callback:function(a){a.code&&sr("/googleAuth",{c:a.code},function(a){return a&&a.success?window.location.reload(!0):!1})}})},ebc=function(a,b,c){[].forEach.call(document.querySelectorAll(a),function(a){a.addEventListener(b,c,!1)})},sr=function(a,b,c){var d=new XMLHttpRequest;d.open("POST",a,!0),d.setRequestHeader("Content-Type","application/json"),d.onreadystatechange=function(){return 4===d.readyState&&200===d.status?(c(JSON.parse(d.responseText)),!1):void 0},d.send(JSON.stringify(b))},razError=function(){document.querySelectorAll(".g, .m").fade(!1),document.querySelector(".g").innerHTML=""};!function(){var a=document.createElement("script");a.type="text/javascript",a.async=!0,a.src="https://apis.google.com/js/client:plusone.js?onload=gp";var b=document.getElementsByTagName("script")[0];b.parentNode.insertBefore(a,b)}(),document.addEventListener("DOMContentLoaded",function(a){"use strict";document.getElementsByTagName("section")[0].style.display="block",document.getElementsByTagName("div")[0].style.display="none",ebc("[type=text], [type=password]","input propertychange",function(){var a;switch(this.setCustomValidity(""),this.name){case"b":a=this.value.length<4;break;case"c":a=this.value.length<4||this.value.length>12;break;case"d":a=this.value!==document.querySelector("[name=c]").value}a&&this.setCustomValidity(this.getAttribute("m"))}),ebc("form","submit",function(a){return a.preventDefault(),razError(),document.getElementsByTagName("div").fade(.5),sr(document.querySelector("[h]").isv()?"/new":"/login",this.serialize(),function(a){return a&&a.success?window.location.reload(!0):([].forEach.call(document.querySelectorAll("[type=email], [type=password], [type=text]"),function(a){a.classList.add("e")}),document.getElementsByTagName("div").fade(!1),document.querySelector("[name=a]").focus(),document.querySelector(".g").innerHTML=a.error,document.querySelectorAll(".g, .m").fade(!0),!1)}),!1}),ebc("[type=email],[type=password]","change",razError),ebc("[type=button]","click",function(){razError();var a=!document.querySelector("[h]").isv();document.querySelectorAll("[j]").l(a),document.querySelectorAll("[h]").fade(function(b){for(var c=0,d=b.length;d>c;c++)b[c].setAttribute("required",a),b[c].value=""}),document.querySelector("[type=email]").focus()}),ebc(".m","click",function(){var a=this;a.setAttribute("disabled",!0),a.classList.add("l"),sr("/mail",document.querySelector("form").serialize(),function(b){return a.classList.remove("l"),!1})})})}else document.getElementsByTagName("div")[0].style.display="none",document.getElementsByTagName("form")[0].style.display="none",alert("Votre navigateur n'est pas compatible!!!");
