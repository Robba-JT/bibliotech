$(document).ready(function(){"use strict";if(!(window.FileReader&&"formNoValidate"in document.createElement("input")))return alert("Veuillez installer une version plus récente de votre navigateur!!!"),!1;var a=function(){$(".e").removeClass("e"),$(".g").slideUp().text("")},b=function(){switch(this.name){case"b":this.setCustomValidity(this.value.length<4?"Le nom doit contenir au moins 4 caractères!":"");break;case"c":this.setCustomValidity(this.value.length<4||this.value.length>12?"Le mot de passe doit contenir entre 4 et 12 caractères!":"");break;case"d":this.setCustomValidity(this.value!==$("[name=c]").val()?"Les mots de passe ne sont pas identiques!":"")}};$("[type=text], [type=password]").on("input propertychange",b),$("form").submit(function(b){b.preventDefault(),a(),$("div").show(),$.ajax({url:$("[h]").is(":visible")?"/new":"/login",method:"post",data:$(this).serialize(),success:function(a){return a.success?window.location.reload(!0):($("[type=email], [type=password], [type=text]").addClass("e"),$("div").hide(),$("[name=a]").focus(),$(".g").text(a.error).slideDown("slow"),!1)}})}),$("[type=email],[type=password]").change(a),$("[type=button]").click(function(){a(),$("[h]").val("").toggle("slow",function(){$("[type=button]").val($("[h]").is(":visible")?"Annuler":"Créer compte"),$("[type=submit]").val($("[h]").is(":visible")?"Valider":"Connexion"),$("[h]").attr("required",$("[h]").is(":visible")),$("[type=email]").focus()})}),gapi.signin.render("f",{clientid:"216469168993-dqhiqllodmfovgtrmjdf2ps5kj0h1gg9.apps.googleusercontent.com",cookiepolicy:"none",scope:"https://www.googleapis.com/auth/plus.me https://www.googleapis.com/auth/userinfo.email https://www.googleapis.com/auth/books",width:"wide",redirecturi:"postmessage",accesstype:"offline",callback:function(a){a.code&&$.ajax({url:"/googleAuth",method:"post",data:{code:a.code},success:function(b){return b.success?window.location.reload(!0):($(".e").text(a.error).slideDown("slow"),!1)}})}})});
