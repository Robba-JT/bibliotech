if(window.FileReader&&window.Promise&&"formNoValidate"in document.createElement("input")){var µ=document,app=angular.module("bibliotech",[]);app.config(["$interpolateProvider","$sceProvider",function(a,b){a.startSymbol("[{"),a.endSymbol("}]"),b.enabled(!1)}]),app.run(["$rootScope","$http","$window",function(a,b,c){c.localStorage.clear(),b.post("/trad",{from:"login"}).then(function(b){a.trads=b.data}),a.waiting=!1,a.$on("$locationChangeStart",function(a,b,d){c.localStorage.token})}]),app.directive("defCloak",["$timeout",function(a){return{restrict:"A",link:{post:function(b,c,d){a(function(){d.$set("defCloak",void 0),c.removeClass("def-cloak")})}}}}]),app.directive("compareTo",["$rootScope",function(a){return{restrict:"A",require:"ngModel",scope:{otherModelValue:"=compareTo",notEquals:"@"},link:function(b,c,d,e){e.$validators.compareTo=function(c){return a["new"]?b.notEquals?c!==b.otherModelValue:c===b.otherModelValue:!0},b.$watch("otherModelValue",function(){e.$validate()})}}}]),app.directive("login",[function(){return{restrict:"A",templateUrl:"./html/form.html",controller:["$scope","$http","$window",function(a,b,c){var d=a.user={},e=function(){delete a.error,delete a.success};a.submit=function(){a.waiting=!0,e(),b.post(this["new"]?"/new":"/login",d).then(function(b){b.data&&b.data.success?c.location.reload(!0):(a.error=b.data.error,d.password=null,a.waiting=!1)})},angular.element(µ.one("[type=button]")).on("click",function(){e(),d.name=null,d.confirm=null,a["new"]=!a["new"],a.$apply()}),angular.element(µ.one("#f")).on("click",function(){window.location="/gAuth"}),angular.element(µ.one(".m")).on("click",function(){e(),a.waiting=!0,b.post("/mail",d).then(function(b){a.waiting=!1,a.error=b.data.error,a.success=b.data.success})})}]}}])}else alert(document.body.getAttribute("error"));
