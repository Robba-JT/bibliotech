document.addEventListener("DOMContentLoaded",function(){"use strict";if(!(window.FileReader&&"formNoValidate"in document.createElement("input")))return alert("Veuillez installer une version plus rÃ©cente de votre navigateur!!!"),!1;Element.prototype.sd=function(a){return this.style.display=a?"block":"none",this},Element.prototype.isv=function(){return this.offsetWidth>0&&this.offsetHeight>0},Element.prototype.serialize=function(){var a={};return[].forEach.call(this.getElementsByTagName("input"),function(b){b.name&&b.value&&(a[b.name]=b.value)}),a},Element.prototype.l=function(a){this.value=this.getAttribute(a?"k":"j")};var a=function(a,b,c){[].forEach.call(document.querySelectorAll(a),function(a){a.addEventListener(b,c,!1)})},b=function(a,b,c){var d=new XMLHttpRequest;d.open("POST",a,!0),d.setRequestHeader("Content-Type","application/json"),d.onreadystatechange=function(){return 4===d.readyState&&200===d.status?(c(JSON.parse(d.responseText)),!1):void 0},d.send(JSON.stringify(b))},c=function(){[].forEach.call(document.querySelectorAll(".g, .m"),function(a){a.sd(!1)}),document.querySelector(".g").innerHTML=""},d=function(){var a;switch(this.setCustomValidity(""),this.name){case"b":a=this.value.length<4;break;case"c":a=this.value.length<4||this.value.length>12;break;case"d":a=this.value!==document.querySelector("[name=c]").value}a&&this.setCustomValidity(this.getAttribute("m"))};a("[type=text], [type=password]","input propertychange",d),a("form","submit",function(a){return a.preventDefault(),c(),b(document.querySelector("[h]").isv()?"/new":"/login",this.serialize(),function(a){return a&&a.success?window.location.reload(!0):([].forEach.call(document.querySelectorAll("[type=email], [type=password], [type=text]"),function(a){a.classList.add("e")}),[].forEach.call(document.querySelectorAll("div"),function(a){a.sd(!1)}),document.querySelector("[name=a]").focus(),document.querySelector(".g").innerHTML=a.error,[].forEach.call(document.querySelectorAll(".g, .m"),function(a){a.sd(!0)}),!1)}),!1}),a("[type=email],[type=password]","change",c),a("[type=button]","click",function(){c();var a=!document.querySelector("[h]").isv();[].forEach.call(document.querySelectorAll("[j]"),function(b){b.l(a)}),[].forEach.call(document.querySelectorAll("[h]"),function(b){b.sd(a),b.setAttribute("required",a),b.value=""}),document.querySelector("[type=email]").focus()}),a(".m","click",function(){var a=this;a.setAttribute("disabled",!0),a.classList.add("l"),b("/mail",document.querySelector("form").serialize(),function(b){return a.classList.remove("l"),!1})}),gapi.signin.render("f",{clientid:"216469168993-dqhiqllodmfovgtrmjdf2ps5kj0h1gg9.apps.googleusercontent.com",cookiepolicy:"none",scope:"https://www.googleapis.com/auth/plus.me https://www.googleapis.com/auth/userinfo.email https://www.googleapis.com/auth/books",width:"wide",redirecturi:"postmessage",accesstype:"offline",callback:function(a){a.code&&b("/googleAuth",{c:a.code},function(a){return a&&a.success?window.location.reload(!0):!1})}})});
