!function(){function a(a,b){this.parent=a,this.key=b,this.children=[],this.templateIndex=null,this.links=[]}function b(a,c){var d,e,f,g;if("object"==typeof c)if("[object Array]"===Object.prototype.toString.apply(c))for(d=[],e=0;e<c.length;e++)d.push(b(a,c[e]));else{g=a,d={"":[]};for(f in c)Object.hasOwnProperty.call(c,f)&&(g=g.follow(f),d[""].push(b(a,c[f])));g.links.push(d)}else d=c;return d}function c(a){var b,c,d,e,f,g,h=[],i=[];a.templateIndex=0;for(f in a.children)Object.hasOwnProperty.call(a.children,f)&&i.push(a.children[f]);for(;i.length>0;){b=i.shift(),g=0;for(f in b.children)Object.hasOwnProperty.call(b.children,f)&&(i.push(b.children[f]),g+=1);if(g>1||b.links.length>0){for(c=[],d=b;null===d.templateIndex;)c.unshift(d.key),d=d.parent;for(c.unshift(d.templateIndex),h.push(c),b.templateIndex=h.length,e=0;e<b.links.length;e++)b.links[e][""].unshift(b.templateIndex)}}return h}function d(d){var e,f,g;return e=new a(null,""),g=b(e,d),f=c(e),f.length>0?JSON.stringify({f:"cjson",t:f,v:g},null,null):JSON.stringify(d)}function e(a,b){for(var c=[];b>0;)c=a[b-1].slice(1).concat(c),b=a[b-1][0];return c}function f(a,b){var c,d,g;if("object"==typeof b)if("[object Array]"===Object.prototype.toString.apply(b))for(c=[],d=0;d<b.length;d++)c.push(f(a,b[d]));else for(c={},g=e(a,b[""][0]),d=0;d<g.length;d++)c[g[d]]=f(a,b[""][d+1]);else c=b;return c}function g(a){var b=JSON.parse(a);return"object"==typeof b&&"f"in b&&"cjson"===b.f?f(b.t,b.v):b}a.prototype.follow=function(b){return b in this.children?this.children[b]:(this.children[b]=new a(this,b),this.children[b])},window.CJSON={},window.CJSON.stringify=d,window.CJSON.parse=g}();